# Задача simple-crud-api

## Установка
1. Приложение находится в ветке develop
2. Чтобы загрузить себе нужный код для проверки используй следующую команду **git clone https://github.com/khronic79/simple-crud-api.git -b develop**
3. Для установки нужных модулей, которые используются в приложении воспользуйся командой **npm i**

## Запуск приложения и тестов
1. **npm run start:dev** - запуск приложения в режиме разработки
2. **npm run start:prod** - сборка приложения и запуск в продуктовом режиме
3. **npm run start:test** - запуск всех тестовых сценариев одновременно
4. **npm run start:test1** - запуск 1ого тестового сценария
5. **npm run start:test2** - запуск 2ого тестового сценария
6. **npm run start:test3** - запуск 3ого тестового сценария

## Важно!!!
- Обрати внимание, что в настоящем приложении есть разница между роутами /person и /person/, а также /person/{personId} и /person/{personId}/. 
- При этом переадресации не происходит. 
- Валидны для обращения только роуты /person и /person/{personId}

## Тестирование
1. Файлы тестов лежат в папке \__tests\__ в корневом каталоге проекта.
2. Тесты запускаются каждый на своем сервере с портами 5001, 5002, 5003 соответственно.
3. Скрипты для запуска тестов:
    - start:test - запускает все 3 теста одновременно. (**npm run start:test** - полный текст для командной строки)
    - start:test1, start:test2 и start:test3 - запускают тесты отдельно. Можно посмотреть больше деталей (**npm run start:test1**, **npm run start:test2**, **npm run start:test3**)
4. Для приложения реализованы 3 тестовых сценария:
    - Позитивный сценарий
        - GET-запросом получаем все объекты (ожидается пустой массив)
        - POST-запросом создается новый объект (ожидается ответ, содержащий свежесозданный объект)
        - GET-запросом пытаемся получить созданный объект по его id (ожидается созданный объект)
        - PUT-запросом пытаемся обновить созданный объект (ожидается ответ, содержащий обновленный объект с тем же id)
        - DELETE-запросом удаляем созданный объект по id (ожидается подтверждение успешного удаления)
        - GET-запросом пытаемся получить удаленный объект по id (ожидается ответ, что такого объекта нет)
    - Негативный сценарий (некоректный входные данные)
        - В запросе GET /person/{personId} id не соответствует формату UUID
        - При запросе GET /person/{personId} указанного id не существует
        - При POST запросе не все передаются не все требуемые данные
        - В запросе PUT /person/{personId} id не соответствует формату UUID
        - При запросе PUT /person/{personId} указанного id не существует
        - В запросе DELETE /person/{personId} id не соответствует формату UUID
        - При запросе DELETE /person/{personId} указанного id не существует
    - Негативный сценарий (ошибки чтения базы данных, ошибка 500). Для данного теста мокаются котроллеры, которые получают данные из хранилища и в них принудительно генерируется ошибка (реализация первого пункта в части задания "Продвинутая реализация").
        - Проблема с контроллером для GET /person
        - Проблема с контроллером для GET /person/{personId}
        - Проблема с контроллером для POST /person
        - Проблема с контроллером для PUT /person/{personId}
        - Проблема с контроллером для DELETE /person/{personId}
